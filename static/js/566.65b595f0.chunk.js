"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[566],{5566:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var r=n(9439),a=n(9434),o=n(4165),c=n(5861),s=n(719),i=n(1286),u=n(1267),l=n(4227),d=n(6351),f=n(1830),m=n.n(f),x=n(2791),h=n(4164),p=n(6151),v=n(184);function j(e){var t=e.onClose,n=e.contact,s=n.id,i=n.name,f=n.number,h=(0,x.useState)(""),j=(0,r.Z)(h,2),C=j[0],b=j[1],g=(0,x.useState)(""),Z=(0,r.Z)(g,2),k=Z[0],y=Z[1];(0,x.useEffect)((function(){b(i),y(f)}),[i,f]);var w=(0,a.v9)(d.Af),A=(0,a.v9)(d.Uv),S=(0,a.I0)(),E=function(e){var t=e.target,n=t.value;"name"===t.name?b(n):y(n)},I=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(n){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=C.toLowerCase().trim(),!w.find((function(e){return e.name.toLowerCase().trim()===r&&e.id!==s}))){e.next=7;break}return m().fire({icon:"info",title:"".concat(C," is already in contacts"),confirmButtonColor:"#4289fe"}),e.abrupt("return");case 7:return a={name:C,number:k},t(),e.next=11,S((0,l.A_)({id:s,updatedContact:a}));case 11:return e.next=13,S((0,l.m$)());case 13:if(b(""),y(""),!A){e.next=20;break}return m().fire({icon:"error",position:"top-center",title:"Error!",text:"".concat(A),showConfirmButton:!1,timer:2e3}),e.abrupt("return");case 20:m().fire({icon:"success",position:"top-center",title:"Success!",text:"Contact has been successfully edited!",showConfirmButton:!1,timer:2e3});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.NZ,{children:"Edit contact"}),(0,v.jsxs)(u.l0,{onSubmit:I,autoComplete:"off",children:[(0,v.jsxs)(u.lX,{children:["Name",(0,v.jsx)(u.II,{type:"text",name:"name",value:C,onChange:E,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0})]}),(0,v.jsxs)(u.lX,{children:["Number",(0,v.jsx)(u.II,{type:"tel",name:"number",value:k,onChange:E,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0})]}),(0,v.jsx)(p.Z,{type:"submit",disabled:!C||!k,variant:"contained",children:"Edit"})]})]})}var C=document.querySelector("#modal-root");function b(e){var t=e.onClose,n=e.contact;(0,x.useEffect)((function(){return document.addEventListener("keydown",r),function(){document.removeEventListener("keydown",r)}}));var r=function(e){"Escape"===e.code&&t()};return(0,h.createPortal)((0,v.jsx)(u.C6,{onClick:function(e){e.currentTarget===e.target&&t()},children:(0,v.jsxs)(u.Pz,{children:[(0,v.jsx)(u.x8,{onClick:function(){return t()}}),(0,v.jsx)(j,{onClose:t,contact:n})]})}),C)}var g=function(e){var t=e.contact,n=t.id,f=t.name,h=t.number,p=(0,x.useState)(!1),j=(0,r.Z)(p,2),C=j[0],g=j[1],Z=function(){g(!C)},k=(0,a.v9)(d.xU),y=(0,a.v9)(d.Uv),w=(0,a.I0)(),A=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().fire({icon:"warning",title:"Are you sure?",text:"You are about to delete ".concat(f),showCancelButton:!0,confirmButtonText:"Delete ".concat(f),confirmButtonColor:"red"});case 3:if(!e.sent.isConfirmed){e.next=15;break}return e.next=7,w((0,l.ku)(n));case 7:return e.next=9,w((0,l.m$)());case 9:if(!y){e.next=14;break}return m().fire({title:"Error!",text:"".concat(y),icon:"error",confirmButtonColor:"#4289fe"}),e.abrupt("return");case 14:m().fire({title:"".concat(f," has been deleted!"),icon:"success",confirmButtonColor:"#4289fe"});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(u.lh,{children:[(0,v.jsxs)(u.rZ,{children:[(0,v.jsx)(i.Z,{sx:{fill:"orange",fontSize:"medium"},type:"button",cursor:"pointer",onClick:function(){Z(t.id)}}),(0,v.jsx)(u.VG,{children:f})]}),(0,v.jsxs)(u.rZ,{children:[(0,v.jsxs)(u.Zj,{href:"tel:".concat(h),children:[(0,v.jsx)(s.a54,{color:"rgba(66, 137, 254, 255)"}),h]}),(0,v.jsx)(s.SW4,{type:"button",name:"delete",value:n,onClick:A,disabled:k,cursor:"pointer",color:"red"})]})]}),C&&(0,v.jsx)(b,{onClose:Z,contact:t})]})},Z=function(){var e=(0,a.v9)(d.hF),t=(0,a.I0)();return(0,x.useEffect)((function(){t((0,l.m$)())}),[t]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(u.aV,{children:e.length?e.map((function(e){var t=e.id,n=e.name,r=e.number;return(0,v.jsx)(g,{contact:{id:t,name:n,number:r}},t)})):(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(u.kI,{children:"No contacts"})})})})},k=n(5145),y=function(){var e=(0,a.v9)(d.AD),t=(0,a.I0)(),n=(0,a.v9)(d.Af);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(u.$J,{children:[n.length," contacts"]}),(0,v.jsx)(u.HS,{type:"text",name:"filter",placeholder:"Search contacts by name",value:e,onChange:function(e){t((0,k.T)(e.target.value))}})]})},w=n(8439),A=n(3768),S=n(4270);function E(e){var t=e.onClose,n=(0,x.useState)(""),s=(0,r.Z)(n,2),i=s[0],f=s[1],h=(0,x.useState)(""),j=(0,r.Z)(h,2),C=j[0],b=j[1],g=(0,a.v9)(d.Af),Z=(0,a.v9)(d.Uv),k=(0,a.I0)(),y=function(e){var t=e.target,n=t.value;"name"===t.name?f(n):b(n)},w=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(n){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=i.toLowerCase().trim(),!g.find((function(e){return e.name.toLowerCase().trim()===r}))){e.next=7;break}return m().fire({icon:"info",title:"".concat(i," is already in contacts"),confirmButtonColor:"#4289fe"}),e.abrupt("return");case 7:return a={name:i,number:C},t(),e.next=11,k((0,l.G3)(a));case 11:return e.next=13,k((0,l.m$)());case 13:if(f(""),b(""),!Z){e.next=20;break}return m().fire({icon:"error",position:"top-center",title:"Error!",text:"".concat(Z),showConfirmButton:!1,timer:2e3}),e.abrupt("return");case 20:m().fire({icon:"success",position:"top-center",title:"Success!",text:"".concat(i," has been successfully added!"),showConfirmButton:!1,timer:2e3});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.NZ,{children:"Add contact"}),(0,v.jsxs)(u.l0,{onSubmit:w,autoComplete:"off",children:[(0,v.jsxs)(u.lX,{children:["Name",(0,v.jsx)(u.II,{type:"text",name:"name",value:i,onChange:y,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0})]}),(0,v.jsxs)(u.lX,{children:["Number",(0,v.jsx)(u.II,{type:"tel",name:"number",value:C,onChange:y,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0})]}),(0,v.jsx)(p.Z,{type:"submit",disabled:!i||!C,variant:"contained",children:"Add contact"})]})]})}var I=document.querySelector("#modal-root");function B(e){var t=e.onClose;(0,x.useEffect)((function(){return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}));var n=function(e){"Escape"===e.code&&t()};return(0,h.createPortal)((0,v.jsx)(u.C6,{onClick:function(e){e.currentTarget===e.target&&t()},children:(0,v.jsxs)(u.Pz,{children:[(0,v.jsx)(u.x8,{onClick:function(){return t()}}),(0,v.jsx)(E,{onClose:t})]})}),I)}var z=function(){var e=(0,x.useState)(!1),t=(0,r.Z)(e,2),n=t[0],a=t[1],o=function(){a(!n)};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(S.q,{children:(0,v.jsx)("title",{children:"Contacts=Phonebook="})}),(0,v.jsxs)(u.FS,{children:[(0,v.jsx)(u.NZ,{children:"Contacts"}),(0,v.jsx)(A.Z,{title:"Add contact",children:(0,v.jsx)(w.Z,{fontSize:"large","aria-label":"Add contact",onClick:o,sx:{fill:"rgba(66, 137, 254, 255)"}})})]}),(0,v.jsx)(y,{}),(0,v.jsx)(Z,{}),n&&(0,v.jsx)(B,{onClose:o})]})}}}]);
//# sourceMappingURL=566.65b595f0.chunk.js.map